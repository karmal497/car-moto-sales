<div class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">Encuentra tu Auto o Moto Ideal</h1>
    <p class="hero-subtitle">Explora nuestra amplia selección de vehículos de alta calidad</p>
    <div class="hero-buttons">
      <button
        mat-raised-button
        color="accent"
        (click)="checkAuthAndNavigate('/search')"
        [class.locked]="!isLoggedIn"
        class="explore-btn">
        <mat-icon *ngIf="!isLoggedIn" class="lock-icon">lock</mat-icon>
        Explorar Vehículos
      </button>
      <button
        mat-raised-button
        color="warn"
        (click)="navigateToDiscounts()"
        class="discounts-btn">
        <mat-icon>local_offer</mat-icon>
        Novedades
      </button>
    </div>
  </div>
</div>

<div class="featured-section fade-in">
  <h2>Autos Destacados</h2>
  <div class="vehicle-grid">
    <mat-card *ngFor="let car of featuredCars" class="vehicle-card">
      <img mat-card-image [src]="car.image_url || 'assets/images/car-placeholder.jpg'" alt="{{car.title}}" class="vehicle-image">
      <mat-card-content>
        <h3>{{car.brand}} {{car.model}}</h3>
        <p>Año: {{car.year}}</p>
        <p>Transmisión: {{car.transmission}}</p>
        <p class="price">${{formatNumber(car.price)}}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="checkAuthAndNavigate('/car/' + car.id)">Ver Detalles</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

<div class="featured-section fade-in">
  <h2>Motos Destacadas</h2>
  <div class="vehicle-grid">
    <mat-card *ngFor="let motorcycle of featuredMotorcycles" class="vehicle-card">
      <img mat-card-image [src]="motorcycle.image_url || 'assets/images/motorcycle-placeholder.jpg'" alt="{{motorcycle.title}}" class="vehicle-image">
      <mat-card-content>
        <h3>{{motorcycle.brand}} {{motorcycle.model}}</h3>
        <p>Año: {{motorcycle.year}}</p>
        <p>Categoría: {{motorcycle.category}}</p>
        <p class="price">${{formatNumber(motorcycle.price)}}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="checkAuthAndNavigate('/motorcycle/' + motorcycle.id)">Ver Detalles</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

<div class="features-section fade-in">
  <h2>¿Por qué elegirnos?</h2>
  <div class="features-grid">
    <div class="feature-item">
      <mat-icon>verified_user</mat-icon>
      <h3>Vehículos Verificados</h3>
      <p>Todos nuestros vehículos pasan por un riguroso proceso de verificación.</p>
    </div>
    <div class="feature-item">
      <mat-icon>local_offer</mat-icon>
      <h3>Mejores Precios</h3>
      <p>Ofrecemos los precios más competitivos del mercado.</p>
    </div>
    <div class="feature-item">
      <mat-icon>support_agent</mat-icon>
      <h3>Soporte 24/7</h3>
      <p>Nuestro equipo de soporte está disponible para ayudarte en todo momento.</p>
    </div>
  </div>
</div>

<!-- Sección de Suscripción -->
<div class="subscription-section fade-in">
  <div class="subscription-container">
    <div class="subscription-content">
      <h2>Mantente Informado</h2>
      <p>Suscríbete a nuestro newsletter para recibir las últimas novedades, ofertas exclusivas y nuevos vehículos.</p>

      <form [formGroup]="subscriptionForm" (ngSubmit)="onSubmit()" class="subscription-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Tu correo electrónico</mat-label>
          <input matInput formControlName="email" type="email" placeholder="ejemplo@correo.com">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="subscriptionForm.get('email')?.hasError('required')">
            El correo electrónico es requerido
          </mat-error>
          <mat-error *ngIf="subscriptionForm.get('email')?.hasError('email')">
            Por favor ingresa un correo electrónico válido
          </mat-error>
        </mat-form-field>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="subscribe-btn"
          [disabled]="!subscriptionForm.valid || isSubmitting">
          <span *ngIf="!isSubmitting">Suscribirse</span>
          <span *ngIf="isSubmitting">Suscribiendo...</span>
          <mat-icon *ngIf="!isSubmitting">send</mat-icon>
          <mat-icon *ngIf="isSubmitting" class="spinner">
            <span class="spinner-inner">autorenew</span>
          </mat-icon>
        </button>
      </form>

      <div class="confetti-container" *ngIf="subscriptionSuccess"></div>

      <div class="subscription-success" *ngIf="subscriptionSuccess">
        <mat-icon>check_circle</mat-icon>
        <h3>¡Gracias por suscribirte!</h3>
        <p>Te hemos enviado un correo de confirmación.</p>
      </div>
    </div>
  </div>
</div>

<!-- Modal de autenticación requerida -->
<div *ngIf="showAuthModal" class="auth-modal-overlay">
  <div class="auth-modal">
    <div class="modal-header">
      <mat-icon class="modal-icon">lock</mat-icon>
      <h3>Acceso Restringido</h3>
    </div>
    <div class="modal-content">
      <p>Debes iniciar sesión para acceder a esta sección</p>
    </div>
    <div class="modal-actions">
      <button mat-button (click)="showAuthModal = false">Cancelar</button>
      <button mat-raised-button color="primary" routerLink="/login" (click)="showAuthModal = false">Iniciar Sesión</button>
    </div>
  </div>
</div>
