<!-- car-list.component.html -->
<div class="cars-gallery-container">
  <!-- Hero Section -->
  <div class="gallery-hero">
    <div class="hero-overlay">
      <h1>Galería de Autos Exclusivos</h1>
      <p>Descubre nuestra colección premium de vehículos</p>

      <!-- Search Bar -->
      <div class="hero-search-container">
        <div class="search-box">
          <mat-icon class="search-icon">search</mat-icon>
          <input
            type="text"
            placeholder="Buscar por marca, modelo, año..."
            [(ngModel)]="searchTerm"
            (input)="filterCars()"
            class="search-input">
          <button mat-raised-button color="accent" class="search-btn" (click)="filterCars()">
            Buscar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Results Count -->
  <div class="results-count">
    <p *ngIf="!isLoading">
      {{ filteredCars.length }} autos disponibles en nuestra flota
    </p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Cargando nuestra colección exclusiva...</p>
  </div>

  <!-- No Results -->
  <div *ngIf="!isLoading && filteredCars.length === 0" class="no-results">
    <mat-icon>directions_car</mat-icon>
    <h3>No se encontraron vehículos</h3>
    <p>Intenta con otros términos de búsqueda</p>
    <button mat-raised-button color="primary" (click)="clearSearch()">Mostrar todos</button>
  </div>

  <!-- Cars Grid -->
  <div *ngIf="!isLoading && filteredCars.length > 0" class="exclusive-cars-grid">
    <div
      *ngFor="let car of filteredCars"
      class="exclusive-car-card"
      (click)="viewCarDetails(car.id)">

      <div class="car-image-container">
        <img
          [src]="car.image_url || getRandomCarImage()"
          [alt]="car.title"
          class="car-image"
          (error)="car.image_url = getRandomCarImage()">

        <div class="car-badge" [class.sold]="car.is_sold">
          {{ car.is_sold ? 'Vendido' : 'Disponible' }}
        </div>

        <div class="car-overlay">
          <button mat-icon-button class="view-details-btn">
            <mat-icon>visibility</mat-icon>
            Ver Detalles
          </button>
        </div>
      </div>

      <div class="car-content">
        <h3 class="car-title">{{ car.brand }} {{ car.model }}</h3>
        <p class="car-year">{{ car.year }} • {{ getTransmissionLabel(car.transmission) }}</p>

        <div class="car-specs">
          <div class="spec-item">
            <mat-icon>speed</mat-icon>
            <span>{{ formatNumber(car.mileage) }} km</span>
          </div>
          <div class="spec-item">
            <mat-icon>local_gas_station</mat-icon>
            <span>{{ car.fuel_type }}</span>
          </div>
          <div class="spec-item">
            <mat-icon>color_lens</mat-icon>
            <span>{{ car.color }}</span>
          </div>
        </div>

        <div class="car-price">
          <span class="price-amount">${{ formatNumber(car.price) }}</span>
          <span class="price-label">Precio especial</span>
        </div>

        <button mat-button class="inquiry-btn">
          <mat-icon>car_rental</mat-icon>
          Solicitar Prueba de Manejo
        </button>
      </div>
    </div>
  </div>
</div>
